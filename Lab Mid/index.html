<!DOCTYPE html>
<html>
  <head>
    <title>Lab 2</title>
  </head>

  <body>
    <h1>Student Grade Management System</h1>

    <p>Student Name:</p>
    <input type="text" id="name" />

    <p>Student Grade (0–100):</p>
    <input type="number" id="grade" />

    <br /><br />
    <button onclick="addStudent()">Add Student</button>
    <button onclick="clearAll()">Clear All</button>

    <h2>Student List</h2>
    <ul id="list">
      <li>No Data Found</li>
    </ul>

    <h2>Statistics</h2>
    <p>Total Students: <span id="total">0</span></p>
    <p>Average Grade: <span id="avg">0.00</span></p>
    <p>Highest Grade: <span id="high">0</span></p>
    <p>Lowest Grade: <span id="low">0</span></p>
    <p>Pass Rate: <span id="pass">0.00%</span></p>

    <br />
    <button onclick="doubleGrades()">Double Grades</button>
    <button onclick="resetGrades()">Reset Grades</button>

    <script>
      let names = [];
      let grades = [];
      let original = []; // store original grades

      function addStudent() {
        let n = document.getElementById("name").value.trim();
        let g = parseInt(document.getElementById("grade").value);

        if (n === "") {
          alert("Name cannot be empty");
          return;
        }

        if (isNaN(g) || g < 0 || g > 100) {
          alert("Grade must be 0–100");
          return;
        }

        names.push(n);
        grades.push(g);
        original.push(g);

        document.getElementById("name").value = "";
        document.getElementById("grade").value = "";

        showList();
        showStats();
      }

      function clearAll() {
        names = [];
        grades = [];
        original = [];

        showList();
        showStats();
      }

      function showList() {
        let list = document.getElementById("list");
        list.innerHTML = "";

        if (names.length === 0) {
          list.innerHTML = "<li>No Data Found</li>";
          return;
        }

        for (let i = 0; i < names.length; i++) {
          let li = document.createElement("li");
          li.textContent = names[i] + ": " + grades[i];
          list.appendChild(li);
        }
      }

      function showStats() {
        let total = names.length;

        if (total === 0) {
          document.getElementById("total").textContent = 0;
          document.getElementById("avg").textContent = "0.00";
          document.getElementById("high").textContent = 0;
          document.getElementById("low").textContent = 0;
          document.getElementById("pass").textContent = "0.00%";
          return;
        }

        let sum = 0;
        let high = 0;
        let low = 100;
        let pass = 0;

        for (let i = 0; i < grades.length; i++) {
          let g = grades[i];
          sum += g;
          if (g > high) high = g;
          if (g < low) low = g;
          if (g >= 50) pass++;
        }

        document.getElementById("total").textContent = total;
        document.getElementById("avg").textContent = (sum / total).toFixed(2);
        document.getElementById("high").textContent = high;
        document.getElementById("low").textContent = low;
        document.getElementById("pass").textContent =
          ((pass / total) * 100).toFixed(2) + "%";
      }

      function doubleGrades() {
        for (let i = 0; i < grades.length; i++) {
          grades[i] = grades[i] * 2;
          if (grades[i] > 100) grades[i] = 100;
        }

        showList();
        showStats();
      }

      function resetGrades() {
        for (let i = 0; i < grades.length; i++) {
          grades[i] = original[i];
        }

        showList();
        showStats();
      }
    </script>
  </body>
</html>
